<html>
<!-- This is a comment in HTML -->

<head>

<style>

    table, th, td {
        border : 1px solid black
    }
</style>


<title>CS585 Project</title>
<!-- The title tag sets the title bar of the web bar -->

</head>

<body bgcolor="#ffffff">
<!-- The <body> tag lets the browser know that we are beginning the body of the web page.  The bgcolor option sets the background color to the web page -->

   <h1>Project Page for CS585 - Computer Vision</h1>
   <!-- The <h1> tag sets the text to a Heading 1 style.  This is the largest and boldest of all the various heading styles. -->

   <p>Team Members:
	<br>-- Greg Merritt
	<br>-- Andrew Novicki
	<br>-- Jinyuan Zhao
   <!-- The <p> tag denotes a new paragraph -->

<hr>
<h2> Problem Definition </h2>
<p>
Given an image of size n&#215;m in pixels, resize the image into an image of size n'&#215;m' while preserving the visual coherence.
</p>

<hr>
<h2> Algorithm </h2>
<p>
In this project, we are going to use the seam carving algorithm for content-aware image resizing proposed by Avidan et al.[1] .
</p><p>
<b>1. Definition of a seam</b>
</p><p>
For an n&#215;m image, a vertical seam is defined as a series of connected pixels, one in each row:<br>
<center><img src="vertical_seam.png" height="25"></center><br>
Similarly, a horizontal seam is defined as:
<center><img src="horizontal_seam.png" height="25"></center><br>
An example of a horizontal seam and a vertical seam is shown below:<br>
<center><img src="example_seam.png" height="250"></center><br>
</p><p>
<b>2. Finding the seam with minimum energy</b>
</p><p>
There are many ways to define the energy of pixels in an image. One way is to use the l<sub>1</sub>-norm of the gradient:<br>
<center><img src="energy.png" height="45"></center><br>
The energy of a seam is defined as the sum of the energy of all pixels that belong to the seam. To shrink the size of the image, we need to 
remove the horizontal or vertical seam with the smallest energy. The optimal seam can be found with dynamic programming. Define M(i, j)
as the minimum energy of all horizontal (or vertical) seams that end at pixel (i, j). Then
</p><p>
<center>M(i, j)=e<sub>1</sub>(i, j)+min{M(i-1, j-1),M(i-1, j),M(i-1, j+1)}(horizontal)</center>
<center>or M(i, j)=e<sub>1</sub>(i, j)+min{M(i-1, j-1),M(i, j-1),M(i+1, j-1)}(vertical).</center>
</p><p>
The minimum value of the last column (or row) is the minimum energy of all the horizontal (or vertical) seams. We can then backtrack
from the minimum entry to find the optimal seam.
</p><p>
<b>3. Image shrinking</b>
</p><p>
If n'&#60;n and m'&#60;m, we need to remove n-n' vertical seams and m-m' horizontal seams. The vertical seams are removed first until the image gets to the desired size.

<!-- There are four ways of choosing the order of removing:
</p><p>
(1) Remove horizontal seams first, and then remove vertical seams.<br>
(2) Remove vertical seams first, and then remove horizontal seams.<br>
(3) Remove horizontal and vertical seams in alternating order.<br>
(4) Find the optimal order of removing using dynamic programming.<br>
 //-->
</p><p>
<b>4. Image enlarging</b>
</p><p>
If n'&#62;n or m'&#62;m, we need to insert n-n' vertical seams or m-m' horizontal seams. However, we cannot do this by simply finding
 the seam with minimum energy and duplicating it for n-n' (or m-m') times, because this will duplicate the same seam over and over again and 
produce artifacts. Therefore, we find n-n' (or m-m') seams whose energies are the smallest, and duplicate these seams.
</p>

<hr>
<h2> Input images and desired results </h2>
<p>
Example 1: Shrinking the image in both dimensions
<center>
<table>
<tr><td colspan=2></td></tr>

<tr>
  <td>Input image</td> 
  <td><center><img src="input1.png" width="400"></center></td> 
</tr> 

<tr>
  <td>Resizing by cropping</td> 
  <td><center><img src="input1_cropped.png" width="200"></center></td> 
</tr>

<tr>
  <td>Desired output of content-aware resizing</td> 
  <td><center><img src="input1_desired.png" width="200"></center></td> 
</tr> 
</table>
</center>
</p><p>
Example 2: Enlarging the image in one dimension and shrinking in the other dimension
<center>
<table>
<tr><td colspan=2></td></tr>

<tr>
  <td>Input image</td> 
  <td><center><img src="input2_scaled.png" width="280" height="200"></center></td> 
</tr> 

<tr>
  <td>Resizing by scaling</td> 
  <td><center><img src="input2_scaled.png" width="400"></center></td> 
</tr>

<tr>
  <td>Desired output of content-aware resizing</td> 
  <td><center><img src="input2_desired.png" width="400"></center></td> 
</tr> 
</table>
</center>

</p>

<hr>
<h2> Results </h2>
Several test images were ran through the tool using a fixed aspect ratio:
<br>
<table>
    <tr><td><center>Input Image (512x512)</center></td><td><center>Shrunk Image (400x400)</center></td><td><center>Enlarged Image (600x600)</center></td></tr>
<tr><td><center><img src="aoutput/cameraman.png" width="50%"></center></td>
    <td><center><img src="aoutput/cameraman-out4.png" width="50%"></center></td>
    <td><center><img src="aoutput/cameraman-out5.png" width="50%"></center></td>
</tr>
<tr><td><center><img src="aoutput/house.png" width="50%"></center></td>
    <td><center><img src="aoutput/house-out4.png" width="50%"></center></td>
    <td><center><img src="aoutput/house-out5.png" width="50%"></center></td>
</tr>
<tr><td><center><img src="aoutput/jetplane.png" width="50%"></center></td>
    <td><center><img src="aoutput/jetplane-out4.png" width="50%"></center></td>
    <td><center><img src="aoutput/jetplane-out5.png" width="50%"></center></td>
</tr>
<tr><td><center><img src="aoutput/lake.png" width="50%"></center></td>
    <td><center><img src="aoutput/lake-out4.png" width="50%"></center></td>
    <td><center><img src="aoutput/lake-out5.png" width="50%"></center></td>
</tr>
<tr><td><center><img src="aoutput/lena_color_512.png" width="50%"></center></td>
    <td><center><img src="aoutput/lena_color_512-out4.png" width="50%"></center></td>
    <td><center><img src="aoutput/lena_color_512-out5.png" width="50%"></center></td>
</tr>
<tr><td><center><img src="aoutput/livingroom.png" width="50%"></center></td>
    <td><center><img src="aoutput/livingroom-out4.png" width="50%"></center></td>
    <td><center><img src="aoutput/livingroom-out5.png" width="50%"></center></td>
</tr>
<tr><td><center><img src="aoutput/mandril_color.png" width="50%"></center></td>
    <td><center><img src="aoutput/mandril_color-out4.png" width="50%"></center></td>
    <td><center><img src="aoutput/mandril_color-out5.png" width="50%"></center></td>
</tr>
<tr><td><center><img src="aoutput/peppers_color.png" width="50%"></center></td>
    <td><center><img src="aoutput/peppers_color-out4.png" width="50%"></center></td>
    <td><center><img src="aoutput/peppers_color-out5.png" width="50%"></center></td>
</tr>
<tr><td><center><img src="aoutput/pirate.png" width="50%"></center></td>
    <td><center><img src="aoutput/pirate-out4.png" width="50%"></center></td>
    <td><center><img src="aoutput/pirate-out5.png" width="50%"></center></td>
</tr>
<tr><td><center><img src="aoutput/walkbridge.png" width="50%"></center></td>
    <td><center><img src="aoutput/walkbridge-out4.png" width="50%"></center></td>
    <td><center><img src="aoutput/walkbridge-out5.png" width="50%"></center></td>
</tr>
</table>

<hr>
<h2> Discussion </h2>


<hr>
<h2> References </h2>
[1] Avidan, Shai, and Ariel Shamir. "Seam carving for content-aware image resizing." ACM Transactions on graphics (TOG). Vol. 26. No. 3. ACM, 2007.
	   
	   
</body>
</html>
